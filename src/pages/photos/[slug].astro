---
import type {
  InferGetStaticParamsType,
  InferGetStaticPropsType,
  GetStaticPaths
} from "astro";
import { Debug } from "astro:components";
import Page from "@/layouts/MainLayout.astro";
import { photos } from "@/content";

export const getStaticPaths = (() => 
  photos.map(photo => ({
    params: { slug: photo.slug },
    props: { photo },
  }))
) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;
type Params = InferGetStaticParamsType<typeof getStaticPaths>;

const { photo } = Astro.props;
const { slug, file } = photo;
---

<Page
  title={photo.alt}
  class="flex flex-col items-center"
  inset-banner={true}
>
  <div class="h-32 w-full bg-gradient-to-t from-white"/>
  <figure
    transition:name={`photo-${slug}`}
    class="w-full bg-white"
  >
    <img
      class="mx-auto"
      src={file.src}
      height={file.height}
      width={file.width}
      alt={photo.alt}
      decoding="async"
      loading="lazy"
    />
  </figure>
  <div class="h-48 w-full bg-gradient-to-b from-white"/>
</Page>
